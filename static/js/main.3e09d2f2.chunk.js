(this.webpackJsonpstarbase=this.webpackJsonpstarbase||[]).push([[0],{258:function(e,t,a){e.exports=a(460)},460:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(13),i=a.n(c),l=a(43),o=a(203),u=a(28),s=a(50),m=a.n(s),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[],loading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ITEMS_REQUEST":return Object(u.a)({},e,{loading:!0});case"FETCH_ITEMS_SUCCESS":return{loading:!1,items:t.payload,error:""};case"FETCH_ITEMS_FAILURE":return{loading:!1,items:[],error:t.payload};case"SEARCH_ITEM":return Object(u.a)({},e,{search:t.payload});case"SELECT_ITEM":return Object(u.a)({},e,{selectItem:t.payload});default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stations:[],loading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_STATIONS_REQUEST":return Object(u.a)({},e,{loading:!0});case"FETCH_STATIONS_SUCCESS":return{loading:!1,stations:t.payload,error:""};case"FETCH_STATIONS_FAILURE":return{loading:!1,stations:[],error:t.payload};default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{station:{items:[]},loading:!1,search:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ITEMS_STATION_REQUEST":return Object(u.a)({},e,{loading:!0});case"FETCH_ITEMS_STATION_SUCCESS":return{loading:!1,station:t.payload,error:""};case"FETCH_ITEMS_STATION_FAILURE":return{loading:!1,station:[],error:t.payload};case"FETCH_ITEM_PRICES_STATION_REQUEST":return Object(u.a)({},e,{loading:!0});case"FETCH_ITEM_PRICES_STATION_SUCCESS":var n=a(157)(),r=n(e.station),c=r.items.find((function(e){return e.id===t.itemId}));return c.prices=t.prices,c.prices.map((function(e){return e.value=parseFloat(e.value),e})),c.dataChartPrice={name:c.name,data:Object.keys(c.prices).map((function(e){return[parseInt(c.prices[e].date),c.prices[e].value]}))},{loading:!1,station:r,error:""};case"CLEAR_ITEMS_STATION":return{loading:!1,station:{items:[]}};case"SEARCH_ITEM_STATION":return Object(u.a)({},e,{search:t.payload});case"SELECT_ITEM_STATION":return Object(u.a)({},e,{selectItem:t.payload});default:return e}},p=Object(l.c)({items:d,stations:E,itemsStation:f}),b=(0,l.d)(Object(l.a)(o.a)),h=Object(l.e)(p,b),S=a(40),g=a(17),v=a(499),T=a(495),O=a(497),y=a(500),C=a(462),_=a(501),I=Object(T.a)((function(e){return{offset:e.mixins.toolbar,title:{flexGrow:1}}}));var j=function(){var e=I();return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement(v.a,null,r.a.createElement(y.a,null,r.a.createElement(C.a,{variant:"h6",className:e.title},"Star-[Data]-Base"),r.a.createElement(_.a,{component:S.b,to:"/StarDataBase/stations",color:"inherit"},"Stations"),r.a.createElement(_.a,{component:S.b,to:"/StarDataBase/items",color:"inherit"},"Items")))),r.a.createElement("div",{className:e.offset}))},F=a(12),P=a(503),A=a(515),N=a(502),R=a(208),w=a.n(R);var H=function(e){var t=e.searchHandler;return r.a.createElement(A.a,{id:"input-with-icon-textfield",label:"Search",InputProps:{startAdornment:r.a.createElement(N.a,{position:"start"},r.a.createElement(w.a,null))},fullWidth:!0,onChange:t})},M=a(504),k=a(505);var x=function(e){var t=e.name,a=e.description;return r.a.createElement(P.a,{item:!0},r.a.createElement(M.a,{variant:"outlined"},r.a.createElement(k.a,null,r.a.createElement(C.a,{variant:"h4",gutterBottom:!0},t),r.a.createElement(C.a,{variant:"body1"},a))))};var L=function(e){var t=e.item;return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{item:!0},r.a.createElement(H,null)),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{name:t.name,description:t.description})):null)},U=a(22),B=a(510),D=a(511),Q=a(509),z=a(217),q=a(508),J=a(507),V=a(506),W=a(518),G=Object(T.a)((function(e){return{visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var K=function(e){var t=e.headCells,a=e.order,n=e.orderBy,c=e.onRequestSort,i=G();return r.a.createElement(V.a,null,r.a.createElement(J.a,null,t.map((function(e){return r.a.createElement(q.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},r.a.createElement(W.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(t=e.id,function(e){c(e,t)})},e.label,n===e.id?r.a.createElement("span",{className:i.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var t}))))},X=a(519);var Y=function(e){var t=e.item,a=Object(F.b)();return r.a.createElement(J.a,{onMouseOver:function(){a(function(e){return{type:"SELECT_ITEM",payload:e}}(t))},hover:!0},r.a.createElement(q.a,null,r.a.createElement(X.a,{src:null!==t.imgPath?"".concat("http://stardatabase.palladium46.fr").concat(t.imgPath):t.imgPath})),r.a.createElement(q.a,null,t.name),r.a.createElement(q.a,null,t.type.name),r.a.createElement(q.a,null,t.rank))};var Z=function(e){var t=e.headCells,a=Object(F.c)((function(e){return e.items.search})),c=Object(F.c)((function(e){return e.items.items})),i=Object(n.useState)(c),l=Object(U.a)(i,2),o=l[0],u=l[1],s=Object(n.useState)("asc"),m=Object(U.a)(s,2),d=m[0],E=m[1],f=Object(n.useState)("calories"),p=Object(U.a)(f,2),b=p[0],h=p[1];function S(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}return Object(n.useEffect)((function(){if(c.length>0&&a){var e=a.toLowerCase(),t=c.filter((function(t){return Object.keys(t).some((function(n){return"string"===typeof t[n]?t[n].toLowerCase().includes(e):"number"===typeof t[n]&&t[n]===Number(a)}))}));u(t)}else u(c)}),[c,a]),r.a.createElement(Q.a,{component:z.a,variant:"outlined"},r.a.createElement(B.a,null,r.a.createElement(K,{headCells:t,order:d,orderBy:b,onRequestSort:function(e,t){E(b===t&&"asc"===d?"desc":"asc"),h(t)},rowCount:o.length}),r.a.createElement(D.a,null,o?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(o,function(e,t){return"desc"===e?function(e,a){return S(e,a,t)}:function(e,a){return-S(e,a,t)}}(d,b)).map((function(e){return r.a.createElement(Y,{key:e.id,item:e})})):null)))},$=[{id:"image",numeric:!1,disablePadding:!1,label:""},{id:"name",numeric:!1,disablePadding:!1,label:"Name"},{id:"type",numeric:!1,disablePadding:!1,label:"Type"},{id:"rank",numeric:!1,disablePadding:!1,label:"Rank"}];var ee=function(){var e=Object(F.b)(),t=Object(F.c)((function(e){return e.items.selectItem}));return Object(n.useEffect)((function(){e((function(e){e({type:"FETCH_ITEMS_REQUEST"}),m.a.get("".concat("http://stardatabase.palladium46.fr","/api/item")).then((function(t){e({type:"FETCH_ITEMS_SUCCESS",payload:t.data})})).catch((function(t){e(function(e){return{type:"FETCH_ITEMS_FAILURE",payload:e}}(t.message))}))}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{container:!0,spacing:3},r.a.createElement(P.a,{item:!0,md:8,xs:12},r.a.createElement(Z,{headCells:$})),r.a.createElement(P.a,{container:!0,direction:"column",spacing:3,item:!0,md:4,xs:12},r.a.createElement(L,{item:t}))))},te=a(76),ae=a.n(te);var ne=function(e){var t=e.dataChartPrice,a=void 0===t?[]:t;return r.a.createElement(r.a.Fragment,null,a.data.length>1?r.a.createElement(P.a,{item:!0},r.a.createElement(z.a,{variant:"outlined"},r.a.createElement(ae.a,{options:{chart:{toolbar:{show:!1},zoom:{enabled:!1},animations:{enabled:!1}},grid:{padding:{right:30,left:20}},xaxis:{type:"datetime",labels:{show:!1}},yaxis:{labels:{show:!1}},stroke:{width:5},markers:{size:0}},height:"200",series:[a],type:"area",width:"100%"}))):null)};var re=function(e){var t=e.name,a=e.description;return r.a.createElement(P.a,{item:!0},r.a.createElement(M.a,{variant:"outlined"},r.a.createElement(k.a,null,r.a.createElement(C.a,{variant:"h4",gutterBottom:!0},t),r.a.createElement(C.a,{variant:"body1"},a))))};var ce=function(e){var t=e.item,a=Object(F.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{item:!0},r.a.createElement(H,{searchHandler:function(e){a({type:"SEARCH_ITEM_STATION",payload:e.target.value})}})),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{name:t.name,description:t.description}),void 0!==t.dataChartPrice?r.a.createElement(ne,{dataChartPrice:t.dataChartPrice}):null):null)},ie=a(138),le=a(101),oe=a.n(le),ue=a(135);var se=function(){var e=Object(F.c)((function(e){return e.itemsStation.station.items})),t=Object(n.useState)([]),c=Object(U.a)(t,2),i=c[0],l=c[1];Object(n.useEffect)((function(){if(e.length>0){var t=a(157)()(e),n=[];t.map((function(e){return void 0!==e.dataChartPrice&&e.dataChartPrice.data.length>0&&(e.dataChartPrice.data=[].concat(Object(ie.a)(e.dataChartPrice.data),[[oe()().valueOf(),parseFloat(e.currentSellingPrice)]]),n=[].concat(Object(ie.a)(n),[e.dataChartPrice])),e})),l(n)}return function(){l([])}}),[e]);var o={chart:{id:"chart",locales:[ue],defaultLocale:"fr",animations:{enabled:!1}},xaxis:{type:"datetime"},stroke:{curve:"smooth",width:2},zoom:{enabled:!0},markers:{size:0},dataLabels:{enabled:!1}},u={chart:{locales:[ue],defaultLocale:"fr",selection:{enabled:!0,xaxis:{min:oe()().subtract(5,"days").valueOf(),max:oe()().valueOf()}},brush:{target:"chart",enabled:!0},animations:{enabled:!1}},xaxis:{type:"datetime",tooltip:{enabled:!1}},yaxis:{tickAmount:2},stroke:{curve:"smooth"},legend:{show:!1},markers:{size:0},dataLabels:{enabled:!1}};return r.a.createElement(r.a.Fragment,null,i.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{options:o,height:"300",series:i,type:"line",width:"100%"}),r.a.createElement(ae.a,{options:u,height:"100",series:i,type:"line",width:"100%"})):null)},me=a(516),de=a(512),Ee=a(513),fe=a(514),pe=a(99),be=a(100),he=Object(T.a)((function(e){return{moneyFont:{fontSize:20},moneyImage:{width:20}}}));var Se=function(e){var t=e.value,a=e.previousValue,n=void 0===a?null:a,c=he();return r.a.createElement(me.a,{className:c.moneyFont,display:"flex",alignItems:"center",justifyContent:"flex-end"},void 0!==t?r.a.createElement(r.a.Fragment,null,t,r.a.createElement("img",{className:c.moneyImage,src:"".concat("/StarDataBase","/img/money.png"),alt:"Credit"}),t<(n=null===n?t:n)?r.a.createElement(de.a,{style:{color:pe.a[500]}}):t>n?r.a.createElement(Ee.a,{style:{color:be.a[500]}}):r.a.createElement(fe.a,null)):"N/A")},ge=a(103);var ve=function(e){var t=e.item,a=Object(F.b)(),c=Object(F.c)((function(e){return e.itemsStation.station}));return Object(n.useEffect)((function(){var e,n;a((e=c.id,n=t.id,function(t){t({type:"FETCH_ITEM_PRICES_STATION_REQUEST"}),m.a.get("".concat("http://stardatabase.palladium46.fr","/api/price/sell/item/").concat(n,"/station/").concat(e)).then((function(a){t(function(e,t,a){return{type:"FETCH_ITEM_PRICES_STATION_SUCCESS",stationId:e,itemId:t,prices:a}}(e,n,a.data))})).catch((function(e){t(function(e){return{type:"FETCH_ITEM_PRICES_STATION_FAILURE",payload:e}}(e.message))}))}))}),[]),r.a.createElement(J.a,{onMouseOver:function(){a(function(e){return{type:"SELECT_ITEM_STATION",payload:e}}(t))},hover:!0},r.a.createElement(q.a,null,r.a.createElement(X.a,{src:null!==t.imgPath?"".concat("http://stardatabase.palladium46.fr").concat(t.imgPath):t.imgPath})),r.a.createElement(q.a,null,t.name),r.a.createElement(q.a,null,t.type.name),r.a.createElement(q.a,null,t.rank),r.a.createElement(q.a,null,void 0!==t.prices&&t.prices.length>1?r.a.createElement(ge.b,{width:100,height:30,data:t.prices},r.a.createElement(ge.a,{type:"monotone",dataKey:"value",stroke:"#8884d8",strokeWidth:2,dot:!1,isAnimationActive:!1}),r.a.createElement(ge.c,{type:"number",hide:!0,domain:["auto","auto"]})):null),r.a.createElement(q.a,{align:"right"},r.a.createElement(Se,{value:t.currentSellingPrice,previousValue:t.previousSellingPrice})))};var Te=function(e){var t=e.headCells,a=Object(F.c)((function(e){return e.itemsStation.search})),c=Object(F.c)((function(e){return e.itemsStation.station.items})),i=Object(n.useState)([]),l=Object(U.a)(i,2),o=l[0],u=l[1],s=Object(n.useState)("asc"),m=Object(U.a)(s,2),d=m[0],E=m[1],f=Object(n.useState)("calories"),p=Object(U.a)(f,2),b=p[0],h=p[1];function S(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}return Object(n.useEffect)((function(){if(c.length>0&&a){var e=a.toLowerCase(),t=c.filter((function(t){return Object.keys(t).some((function(n){return"string"===typeof t[n]?t[n].toLowerCase().includes(e):"number"===typeof t[n]&&t[n]===Number(a)}))}));u(t)}else u(c)}),[c,a]),r.a.createElement(Q.a,{component:z.a,variant:"outlined"},r.a.createElement(B.a,null,r.a.createElement(K,{headCells:t,order:d,orderBy:b,onRequestSort:function(e,t){E(b===t&&"asc"===d?"desc":"asc"),h(t)},rowCount:o.length}),r.a.createElement(D.a,null,o?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(o,function(e,t){return"desc"===e?function(e,a){return S(e,a,t)}:function(e,a){return-S(e,a,t)}}(d,b)).map((function(e){return r.a.createElement(ve,{key:e.id,item:e})})):null)))},Oe=[{id:"image",numeric:!1,disablePadding:!1,label:""},{id:"name",numeric:!1,disablePadding:!1,label:"Name"},{id:"type",numeric:!1,disablePadding:!1,label:"Type"},{id:"rank",numeric:!1,disablePadding:!1,label:"Rank"},{id:"priceevo",numeric:!1,disablePadding:!1,label:"Price Evolution"},{id:"currentPrice",numeric:!0,disablePadding:!1,label:"Price"}];var ye=function(){var e=Object(g.f)().id,t=Object(F.b)(),a=Object(F.c)((function(e){return e.itemsStation.station})),c=Object(F.c)((function(e){return e.itemsStation.selectItem}));return Object(n.useEffect)((function(){var a;return t((a=e,function(e){e({type:"FETCH_ITEMS_STATION_REQUEST"}),m.a.get("".concat("http://stardatabase.palladium46.fr","/api/station/").concat(a)).then((function(t){e({type:"FETCH_ITEMS_STATION_SUCCESS",payload:t.data})})).catch((function(t){e(function(e){return{type:"FETCH_ITEMS_STATION_FAILURE",payload:e}}(t.message))}))})),function(){t({type:"CLEAR_ITEMS_STATION"})}}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{variant:"h3"},a.name),r.a.createElement(P.a,{container:!0,spacing:3},r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(se,null))),r.a.createElement(P.a,{container:!0,spacing:3},r.a.createElement(P.a,{item:!0,md:8,xs:12},r.a.createElement(Te,{headCells:Oe})),r.a.createElement(P.a,{container:!0,direction:"column",spacing:3,item:!0,md:4,xs:12},r.a.createElement(ce,{item:c}))))};var Ce=function(e){var t=e.id,a=e.name;return r.a.createElement(J.a,{hover:!0},r.a.createElement(q.a,null,r.a.createElement(C.a,null,a)),r.a.createElement(q.a,{align:"right"},r.a.createElement(_.a,{variant:"contained",component:S.b,to:"/StarDataBase/station/".concat(t,"/items"),color:"primary"},"Show items prices")))};var _e=function(e){var t=e.stations,a=e.headCells,c=Object(F.c)((function(e){return e.stations.search})),i=Object(n.useState)(t),l=Object(U.a)(i,2),o=l[0],u=l[1],s=Object(n.useState)("asc"),m=Object(U.a)(s,2),d=m[0],E=m[1],f=Object(n.useState)("calories"),p=Object(U.a)(f,2),b=p[0],h=p[1];function S(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}return Object(n.useEffect)((function(){if(t.length>0)if(c){var e=c.toLowerCase(),a=t.filter((function(t){return Object.keys(t).some((function(a){return"string"===typeof t[a]?t[a].toLowerCase().includes(e):"number"===typeof t[a]&&t[a]===Number(c)}))}));u(a)}else u(t)}),[t,c]),r.a.createElement(Q.a,{component:z.a,variant:"outlined"},r.a.createElement(B.a,null,r.a.createElement(K,{headCells:a,order:d,orderBy:b,onRequestSort:function(e,t){E(b===t&&"asc"===d?"desc":"asc"),h(t)},rowCount:o.length}),r.a.createElement(D.a,null,o?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(o,function(e,t){return"desc"===e?function(e,a){return S(e,a,t)}:function(e,a){return-S(e,a,t)}}(d,b)).map((function(e){return r.a.createElement(Ce,{key:e.id,id:e.id,name:e.name})})):null)))};var Ie=function(){return r.a.createElement(P.a,{item:!0},r.a.createElement(H,null))},je=[{id:"name",numeric:!1,disablePadding:!1,label:"Name"},{id:"action",numeric:!1,disablePadding:!1,label:""}];var Fe=function(){var e=Object(F.b)(),t=Object(F.c)((function(e){return e.stations.stations})),a=Object(n.useState)(),c=Object(U.a)(a,2),i=c[0];return c[1],Object(n.useEffect)((function(){e((function(e){e({type:"FETCH_STATIONS_REQUEST"}),m.a.get("".concat("http://stardatabase.palladium46.fr","/api/station")).then((function(t){e({type:"FETCH_STATIONS_SUCCESS",payload:t.data})})).catch((function(t){e(function(e){return{type:"FETCH_STATIONS_FAILURE",payload:e}}(t.message))}))}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{container:!0,spacing:3},r.a.createElement(P.a,{item:!0,md:8,xs:12},r.a.createElement(_e,{stations:t,headCells:je})),r.a.createElement(P.a,{container:!0,direction:"column",spacing:3,item:!0,md:4,xs:12},r.a.createElement(Ie,{item:i}))))},Pe=Object(T.a)((function(e){return{margin:{marginTop:16}}}));var Ae=function(){var e=Pe();return r.a.createElement(S.a,null,r.a.createElement(j,null),r.a.createElement(v.a,{className:e.margin},r.a.createElement(g.c,null,r.a.createElement(g.a,{path:"/StarDataBase/station/:id/items",component:ye}),r.a.createElement(g.a,{path:"/StarDataBase/stations",component:Fe}),r.a.createElement(g.a,{path:"/StarDataBase/items",component:ee}),r.a.createElement(g.a,{path:"/StarDataBase/",component:Fe}))))};i.a.render(r.a.createElement(F.a,{store:h},r.a.createElement(Ae,null)),document.getElementById("root"))}},[[258,1,2]]]);
//# sourceMappingURL=main.3e09d2f2.chunk.js.map