(this.webpackJsonpstarbase=this.webpackJsonpstarbase||[]).push([[0],{258:function(e,t,a){e.exports=a(460)},460:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),i=a.n(c),l=a(45),o=a(205),u=a(27),s=a(51),m=a.n(s),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[],loading:!1,search:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ITEMS_REQUEST":return Object(u.a)({},e,{loading:!0});case"FETCH_ITEMS_SUCCESS":return{loading:!1,items:t.payload,error:""};case"FETCH_ITEMS_FAILURE":return{loading:!1,items:[],error:t.payload};case"SEARCH_ITEM":return Object(u.a)({},e,{search:t.payload});case"SELECT_ITEM":return Object(u.a)({},e,{selectItem:t.payload});default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stations:[],loading:!1,search:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_STATIONS_REQUEST":return Object(u.a)({},e,{loading:!0});case"FETCH_STATIONS_SUCCESS":return{loading:!1,stations:t.payload,error:""};case"FETCH_STATIONS_FAILURE":return{loading:!1,stations:[],error:t.payload};case"SEARCH_STATION":return Object(u.a)({},e,{search:t.payload});default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{station:{items:[]},loading:!1,search:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ITEMS_STATION_REQUEST":return Object(u.a)({},e,{loading:!0});case"FETCH_ITEMS_STATION_SUCCESS":return{loading:!1,station:t.payload,error:""};case"FETCH_ITEMS_STATION_FAILURE":return{loading:!1,station:[],error:t.payload};case"FETCH_ITEM_PRICES_STATION_REQUEST":return Object(u.a)({},e,{loading:!0});case"FETCH_ITEM_PRICES_STATION_SUCCESS":var n=a(159)(),r=n(e.station),c=r.items.find((function(e){return e.id===t.itemId}));return c.prices=t.prices,c.prices.map((function(e){return e.value=parseFloat(e.value),e})),c.dataChartPrice={name:c.name,data:Object.keys(c.prices).map((function(e){return[parseInt(c.prices[e].date),c.prices[e].value]}))},{loading:!1,station:r,error:""};case"CLEAR_ITEMS_STATION":return{loading:!1,station:{items:[]}};case"SEARCH_ITEM_STATION":return Object(u.a)({},e,{search:t.payload});case"SELECT_ITEM_STATION":return Object(u.a)({},e,{selectItem:t.payload});default:return e}},p=Object(l.c)({items:d,stations:E,itemsStation:f}),b=(0,l.d)(Object(l.a)(o.a)),g=Object(l.e)(p,b),h=a(41),S=a(17),v=a(499),y=a(495),T=a(497),O=a(500),C=a(462),_=a(501),I=Object(y.a)((function(e){return{offset:e.mixins.toolbar,title:{flexGrow:1}}}));var j=function(){var e=I();return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(v.a,null,r.a.createElement(O.a,null,r.a.createElement(C.a,{variant:"h6",className:e.title},"Star-[Data]-Base"),r.a.createElement(_.a,{component:h.b,to:"/StarDataBase/stations",color:"inherit"},"Stations"),r.a.createElement(_.a,{component:h.b,to:"/StarDataBase/items",color:"inherit"},"Items")))),r.a.createElement("div",{className:e.offset}))},F=a(11),A=a(503),P=a(515),N=a(502),H=a(210),R=a.n(H);var w=function(e){var t=e.searchHandler;return r.a.createElement(P.a,{id:"input-with-icon-textfield",label:"Search",InputProps:{startAdornment:r.a.createElement(N.a,{position:"start"},r.a.createElement(R.a,null))},fullWidth:!0,onChange:t})},M=a(504),x=a(505),k=a(517);var L=function(e){var t=e.item;return r.a.createElement(k.a,{"aria-label":"breadcrumb",gutterBottom:!0},r.a.createElement(C.a,{variant:"caption"},t.type.subCategory.category.name),r.a.createElement(C.a,{variant:"caption"},t.type.subCategory.name),r.a.createElement(C.a,{variant:"caption",color:"textPrimary"},t.type.name))};var U=function(e){var t=e.item;return r.a.createElement(A.a,{item:!0},r.a.createElement(M.a,{variant:"outlined"},r.a.createElement(x.a,null,r.a.createElement(C.a,{variant:"h4"},t.name),r.a.createElement(L,{item:t}),r.a.createElement(C.a,{variant:"body1"},t.description))))};var B=function(e){var t=e.item,a=Object(F.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{item:!0},r.a.createElement(w,{searchHandler:function(e){a({type:"SEARCH_ITEM",payload:e.target.value})}})),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{item:t})):null)},D=a(23),Q=a(510),z=a(511),q=a(509),J=a(219),V=a(508),W=a(507),G=a(506),K=a(519),X=Object(y.a)((function(e){return{visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var Y=function(e){var t=e.headCells,a=e.order,n=e.orderBy,c=e.onRequestSort,i=X();return r.a.createElement(G.a,null,r.a.createElement(W.a,null,t.map((function(e){return r.a.createElement(V.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},r.a.createElement(K.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(t=e.id,function(e){c(e,t)})},e.label,n===e.id?r.a.createElement("span",{className:i.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var t}))))},Z=a(520);var $=function(e){var t=e.item,a=Object(F.b)();return r.a.createElement(W.a,{onMouseOver:function(){a(function(e){return{type:"SELECT_ITEM",payload:e}}(t))},hover:!0},r.a.createElement(V.a,null,r.a.createElement(Z.a,{src:null!==t.imgPath?"".concat("https://stardatabase.palladium46.fr").concat(t.imgPath):t.imgPath})),r.a.createElement(V.a,null,t.name),r.a.createElement(V.a,null,t.type.subCategory.category.name),r.a.createElement(V.a,null,t.type.subCategory.name),r.a.createElement(V.a,null,t.type.name),r.a.createElement(V.a,null,t.rank))};var ee=function(e){var t=e.headCells,a=Object(F.c)((function(e){return e.items.search})),c=Object(F.c)((function(e){return e.items.items})),i=Object(n.useState)(c),l=Object(D.a)(i,2),o=l[0],u=l[1],s=Object(n.useState)("asc"),m=Object(D.a)(s,2),d=m[0],E=m[1],f=Object(n.useState)("name"),p=Object(D.a)(f,2),b=p[0],g=p[1];function h(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}return Object(n.useEffect)((function(){if(c.length>0&&a){var e=a.toLowerCase(),t=c.filter((function(t){return Object.keys(t).some((function(n){return"string"===typeof t[n]?t[n].toLowerCase().includes(e):"number"===typeof t[n]&&t[n]===Number(a)}))}));u(t)}else u(c)}),[c,a]),r.a.createElement(q.a,{component:J.a,variant:"outlined"},r.a.createElement(Q.a,null,r.a.createElement(Y,{headCells:t,order:d,orderBy:b,onRequestSort:function(e,t){E(b===t&&"asc"===d?"desc":"asc"),g(t)},rowCount:o.length}),r.a.createElement(z.a,null,o?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(o,function(e,t){return"desc"===e?function(e,a){return h(e,a,t)}:function(e,a){return-h(e,a,t)}}(d,b)).map((function(e){return r.a.createElement($,{key:e.id,item:e})})):null)))},te=[{id:"image",numeric:!1,disablePadding:!1,label:""},{id:"name",numeric:!1,disablePadding:!1,label:"Name"},{id:"category",numeric:!1,disablePadding:!1,label:"Category"},{id:"subCategory",numeric:!1,disablePadding:!1,label:"Sub Category"},{id:"type",numeric:!1,disablePadding:!1,label:"Type"},{id:"rank",numeric:!1,disablePadding:!1,label:"Rank"}];var ae=function(){var e=Object(F.b)(),t=Object(F.c)((function(e){return e.items.selectItem}));return Object(n.useEffect)((function(){e((function(e){e({type:"FETCH_ITEMS_REQUEST"}),m.a.get("".concat("https://stardatabase.palladium46.fr","/api/item")).then((function(t){e({type:"FETCH_ITEMS_SUCCESS",payload:t.data})})).catch((function(t){e(function(e){return{type:"FETCH_ITEMS_FAILURE",payload:e}}(t.message))}))}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{container:!0,spacing:3},r.a.createElement(A.a,{item:!0,md:8,xs:12},r.a.createElement(ee,{headCells:te})),r.a.createElement(A.a,{container:!0,direction:"column",spacing:3,item:!0,md:4,xs:12},r.a.createElement(B,{item:t}))))},ne=a(76),re=a.n(ne);var ce=function(e){var t=e.dataChartPrice,a=void 0===t?[]:t;return r.a.createElement(r.a.Fragment,null,a.data.length>1?r.a.createElement(A.a,{item:!0},r.a.createElement(J.a,{variant:"outlined"},r.a.createElement(re.a,{options:{chart:{toolbar:{show:!1},zoom:{enabled:!1},animations:{enabled:!1}},grid:{padding:{right:30,left:20}},xaxis:{type:"datetime",labels:{show:!1}},yaxis:{labels:{show:!1}},stroke:{width:5},markers:{size:0}},height:"200",series:[a],type:"area",width:"100%"}))):null)};var ie=function(e){var t=e.item;return r.a.createElement(A.a,{item:!0},r.a.createElement(M.a,{variant:"outlined"},r.a.createElement(x.a,null,r.a.createElement(C.a,{variant:"h4"},t.name),r.a.createElement(L,{item:t}),r.a.createElement(C.a,{variant:"body1"},t.description))))};var le=function(e){var t=e.item,a=Object(F.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{item:!0},r.a.createElement(w,{searchHandler:function(e){a({type:"SEARCH_ITEM_STATION",payload:e.target.value})}})),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{item:t}),void 0!==t.dataChartPrice?r.a.createElement(ce,{dataChartPrice:t.dataChartPrice}):null):null)},oe=a(138),ue=a(101),se=a.n(ue),me=a(135);var de=function(){var e=Object(F.c)((function(e){return e.itemsStation.station.items})),t=Object(n.useState)([]),c=Object(D.a)(t,2),i=c[0],l=c[1];Object(n.useEffect)((function(){if(e.length>0){var t=a(159)()(e),n=[];t.map((function(e){return void 0!==e.dataChartPrice&&e.dataChartPrice.data.length>0&&(e.dataChartPrice.data=[].concat(Object(oe.a)(e.dataChartPrice.data),[[se()().valueOf(),parseFloat(e.currentSellingPrice)]]),n=[].concat(Object(oe.a)(n),[e.dataChartPrice])),e})),l(n)}return function(){l([])}}),[e]);var o={chart:{id:"chart",locales:[me],defaultLocale:"fr",animations:{enabled:!1}},xaxis:{type:"datetime"},stroke:{curve:"smooth",width:2},zoom:{enabled:!0},markers:{size:0},dataLabels:{enabled:!1}},u={chart:{locales:[me],defaultLocale:"fr",selection:{enabled:!0,xaxis:{min:se()().subtract(5,"days").valueOf(),max:se()().valueOf()}},brush:{target:"chart",enabled:!0},animations:{enabled:!1}},xaxis:{type:"datetime",tooltip:{enabled:!1}},yaxis:{tickAmount:2},stroke:{curve:"smooth"},legend:{show:!1},markers:{size:0},dataLabels:{enabled:!1}};return r.a.createElement(r.a.Fragment,null,i.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,{options:o,height:"300",series:i,type:"line",width:"100%"}),r.a.createElement(re.a,{options:u,height:"100",series:i,type:"line",width:"100%"})):null)},Ee=a(516),fe=a(512),pe=a(513),be=a(514),ge=a(99),he=a(100),Se=Object(y.a)((function(e){return{moneyFont:{fontSize:20},moneyImage:{width:20}}}));var ve=function(e){var t=e.value,a=e.previousValue,n=void 0===a?null:a,c=Se();return r.a.createElement(Ee.a,{className:c.moneyFont,display:"flex",alignItems:"center",justifyContent:"flex-end"},void 0!==t?r.a.createElement(r.a.Fragment,null,t,r.a.createElement("img",{className:c.moneyImage,src:"".concat("/StarDataBase","/img/money.png"),alt:"Credit"}),t<(n=null===n?t:n)?r.a.createElement(fe.a,{style:{color:ge.a[500]}}):t>n?r.a.createElement(pe.a,{style:{color:he.a[500]}}):r.a.createElement(be.a,null)):"N/A")},ye=a(103);var Te=function(e){var t=e.item,a=Object(F.b)(),c=Object(F.c)((function(e){return e.itemsStation.station}));return Object(n.useEffect)((function(){var e,n;a((e=c.id,n=t.id,function(t){t({type:"FETCH_ITEM_PRICES_STATION_REQUEST"}),m.a.get("".concat("https://stardatabase.palladium46.fr","/api/price/sell/item/").concat(n,"/station/").concat(e)).then((function(a){t(function(e,t,a){return{type:"FETCH_ITEM_PRICES_STATION_SUCCESS",stationId:e,itemId:t,prices:a}}(e,n,a.data))})).catch((function(e){t(function(e){return{type:"FETCH_ITEM_PRICES_STATION_FAILURE",payload:e}}(e.message))}))}))}),[]),r.a.createElement(W.a,{onMouseOver:function(){a(function(e){return{type:"SELECT_ITEM_STATION",payload:e}}(t))},hover:!0},r.a.createElement(V.a,null,r.a.createElement(Z.a,{src:null!==t.imgPath?"".concat("https://stardatabase.palladium46.fr").concat(t.imgPath):t.imgPath})),r.a.createElement(V.a,null,t.name),r.a.createElement(V.a,null,t.type.subCategory.name),r.a.createElement(V.a,null,t.type.name),r.a.createElement(V.a,null,void 0!==t.prices&&t.prices.length>1?r.a.createElement(ye.b,{width:100,height:30,data:t.prices},r.a.createElement(ye.a,{type:"monotone",dataKey:"value",stroke:"#8884d8",strokeWidth:2,dot:!1,isAnimationActive:!1}),r.a.createElement(ye.c,{type:"number",hide:!0,domain:["auto","auto"]})):null),r.a.createElement(V.a,{align:"right"},r.a.createElement(ve,{value:t.currentSellingPrice,previousValue:t.previousSellingPrice})))};var Oe=function(e){var t=e.headCells,a=Object(F.c)((function(e){return e.itemsStation.search})),c=Object(F.c)((function(e){return e.itemsStation.station.items})),i=Object(n.useState)([]),l=Object(D.a)(i,2),o=l[0],u=l[1],s=Object(n.useState)("asc"),m=Object(D.a)(s,2),d=m[0],E=m[1],f=Object(n.useState)("name"),p=Object(D.a)(f,2),b=p[0],g=p[1];function h(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}return Object(n.useEffect)((function(){if(c.length>0&&a){var e=a.toLowerCase(),t=c.filter((function(t){return Object.keys(t).some((function(n){return"string"===typeof t[n]?t[n].toLowerCase().includes(e):"number"===typeof t[n]&&t[n]===Number(a)}))}));u(t)}else u(c)}),[c,a]),r.a.createElement(r.a.Fragment,null,o.length>0?r.a.createElement(q.a,{component:J.a,variant:"outlined"},r.a.createElement(Q.a,null,r.a.createElement(Y,{headCells:t,order:d,orderBy:b,onRequestSort:function(e,t){E(b===t&&"asc"===d?"desc":"asc"),g(t)},rowCount:o.length}),r.a.createElement(z.a,null,o?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(o,function(e,t){return"desc"===e?function(e,a){return h(e,a,t)}:function(e,a){return-h(e,a,t)}}(d,b)).map((function(e){return r.a.createElement(Te,{key:e.id,item:e})})):null))):r.a.createElement(C.a,{variant:"h5"},"No items"))},Ce=[{id:"image",numeric:!1,disablePadding:!1,label:""},{id:"name",numeric:!1,disablePadding:!1,label:"Name"},{id:"subCategory",numeric:!1,disablePadding:!1,label:"Sub Category"},{id:"type",numeric:!1,disablePadding:!1,label:"Type"},{id:"priceevo",numeric:!1,disablePadding:!1,label:"Price Evolution"},{id:"currentSellingPrice",numeric:!0,disablePadding:!1,label:"Price"}];var _e=function(){var e=Object(S.f)().id,t=Object(F.b)(),a=Object(F.c)((function(e){return e.itemsStation.station})),c=Object(F.c)((function(e){return e.itemsStation.selectItem}));return Object(n.useEffect)((function(){var a;return t((a=e,function(e){e({type:"FETCH_ITEMS_STATION_REQUEST"}),m.a.get("".concat("https://stardatabase.palladium46.fr","/api/station/").concat(a)).then((function(t){e({type:"FETCH_ITEMS_STATION_SUCCESS",payload:t.data})})).catch((function(t){e(function(e){return{type:"FETCH_ITEMS_STATION_FAILURE",payload:e}}(t.message))}))})),function(){t({type:"CLEAR_ITEMS_STATION"})}}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{variant:"h3"},a.name),r.a.createElement(A.a,{container:!0,spacing:3},r.a.createElement(A.a,{item:!0,xs:12},r.a.createElement(de,null))),r.a.createElement(A.a,{container:!0,spacing:3},r.a.createElement(A.a,{item:!0,md:8,xs:12},r.a.createElement(Oe,{headCells:Ce})),r.a.createElement(A.a,{container:!0,direction:"column",spacing:3,item:!0,md:4,xs:12},r.a.createElement(le,{item:c}))))};var Ie=function(){var e=Object(F.b)();return r.a.createElement(A.a,{item:!0},r.a.createElement(w,{searchHandler:function(t){e({type:"SEARCH_STATION",payload:t.target.value})}}))};var je=function(e){var t=e.id,a=e.name;return r.a.createElement(W.a,{hover:!0},r.a.createElement(V.a,null,r.a.createElement(C.a,null,a)),r.a.createElement(V.a,{align:"right"},r.a.createElement(_.a,{variant:"contained",component:h.b,to:"/StarDataBase/station/".concat(t,"/items"),color:"primary"},"Show items prices")))};var Fe=function(e){var t=e.stations,a=e.headCells,c=Object(F.c)((function(e){return e.stations.search})),i=Object(n.useState)(t),l=Object(D.a)(i,2),o=l[0],u=l[1],s=Object(n.useState)("asc"),m=Object(D.a)(s,2),d=m[0],E=m[1],f=Object(n.useState)("name"),p=Object(D.a)(f,2),b=p[0],g=p[1];function h(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}return Object(n.useEffect)((function(){if(t.length>0&&c){var e=c.toLowerCase(),a=t.filter((function(t){return Object.keys(t).some((function(a){return"string"===typeof t[a]?t[a].toLowerCase().includes(e):"number"===typeof t[a]&&t[a]===Number(c)}))}));u(a)}else u(t)}),[t,c]),r.a.createElement(q.a,{component:J.a,variant:"outlined"},r.a.createElement(Q.a,null,r.a.createElement(Y,{headCells:a,order:d,orderBy:b,onRequestSort:function(e,t){E(b===t&&"asc"===d?"desc":"asc"),g(t)},rowCount:o.length}),r.a.createElement(z.a,null,o?function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(o,function(e,t){return"desc"===e?function(e,a){return h(e,a,t)}:function(e,a){return-h(e,a,t)}}(d,b)).map((function(e){return r.a.createElement(je,{key:e.id,id:e.id,name:e.name})})):null)))},Ae=[{id:"name",numeric:!1,disablePadding:!1,label:"Name"},{id:"action",numeric:!1,disablePadding:!1,label:""}];var Pe=function(){var e=Object(F.b)(),t=Object(F.c)((function(e){return e.stations.stations}));return Object(n.useEffect)((function(){e((function(e){e({type:"FETCH_STATIONS_REQUEST"}),m.a.get("".concat("https://stardatabase.palladium46.fr","/api/station")).then((function(t){e({type:"FETCH_STATIONS_SUCCESS",payload:t.data})})).catch((function(t){e(function(e){return{type:"FETCH_STATIONS_FAILURE",payload:e}}(t.message))}))}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{container:!0,spacing:3},r.a.createElement(A.a,{item:!0,md:8,xs:12},r.a.createElement(Fe,{stations:t,headCells:Ae})),r.a.createElement(A.a,{container:!0,direction:"column",spacing:3,item:!0,md:4,xs:12},r.a.createElement(Ie,null))))},Ne=Object(y.a)((function(e){return{margin:{marginTop:16}}}));var He=function(){var e=Ne();return r.a.createElement(h.a,null,r.a.createElement(j,null),r.a.createElement(v.a,{className:e.margin},r.a.createElement(S.c,null,r.a.createElement(S.a,{path:"/StarDataBase/station/:id/items",component:_e}),r.a.createElement(S.a,{path:"/StarDataBase/stations",component:Pe}),r.a.createElement(S.a,{path:"/StarDataBase/items",component:ae}),r.a.createElement(S.a,{path:"/StarDataBase/",component:Pe}))))};i.a.render(r.a.createElement(F.a,{store:g},r.a.createElement(He,null)),document.getElementById("root"))}},[[258,1,2]]]);
//# sourceMappingURL=main.d1da7d02.chunk.js.map